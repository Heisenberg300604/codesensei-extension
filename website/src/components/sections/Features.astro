---
import Card from '../ui/Card.astro';

const features = [
  {
    icon: 'brain',
    title: 'Logic Validation',
    description: 'Verify your approach before writing code. Get instant feedback on whether your solution strategy makes sense.',
    color: 'primary',
  },
  {
    icon: 'play',
    title: 'Code Dry-Run',
    description: 'Visualize execution step-by-step. See how your code would run without actually executing it.',
    color: 'blue',
  },
  {
    icon: 'lightbulb',
    title: 'Smart Hints',
    description: 'Get unstuck without spoilers. Receive contextual hints that guide you toward the solution.',
    color: 'orange',
  },
  {
    icon: 'clock',
    title: 'Practice Timer',
    description: 'Track your progress and improve speed. Monitor how long you spend on each problem.',
    color: 'emerald',
  },
  {
    icon: 'shield',
    title: 'Anti-Copy-Paste',
    description: 'Learn by doing, not by copying. Encourages real learning through writing code yourself.',
    color: 'red',
  },
  {
    icon: 'move',
    title: 'Draggable Widget',
    description: 'Flexible UI that moves with you. Position the widget anywhere on the page for optimal workflow.',
    color: 'purple',
  },
];

const iconPaths = {
  brain: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z',
  play: 'M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
  lightbulb: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z',
  clock: 'M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z',
  shield: 'M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z',
  move: 'M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z',
};

// Duplicate features multiple times for seamless marquee
const duplicatedFeatures = [...features, ...features, ...features, ...features];
---

<section id="features" class="section-padding" aria-labelledby="features-heading">
  <div class="container-custom">
    <div class="text-center mb-12 md:mb-16">
      <!-- Static Title -->
      <h2 id="features-heading" class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6 tracking-tight">
        Your Personal Coding Sensei
      </h2>
      <p class="text-lg sm:text-xl text-gray-400 max-w-2xl mx-auto px-4 leading-relaxed">
        Everything you need to master LeetCode problems, without the shortcuts that hurt your learning.
      </p>
    </div>
  </div>
  
  <!-- Two-Row Marquee Container -->
  <div class="relative overflow-hidden min-h-[600px] sm:min-h-[700px]">
    <!-- Gradient Fades -->
    <div class="absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-dark-bg to-transparent z-10 pointer-events-none"></div>
    <div class="absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-dark-bg to-transparent z-10 pointer-events-none"></div>
    
    <!-- Row 1: Scroll Left to Right -->
    <div class="marquee-row mb-6">
      <div class="marquee-container">
        <div class="marquee-track marquee-left">
          {duplicatedFeatures.map((feature, index) => {
            const colorClasses = {
              primary: 'bg-primary-500/10 text-primary-400 border border-primary-500/20',
              blue: 'bg-accent-blue/10 text-accent-blue border border-accent-blue/20',
              orange: 'bg-accent-orange/10 text-accent-orange border border-accent-orange/20',
              emerald: 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20',
              red: 'bg-red-500/10 text-red-400 border border-red-500/20',
              purple: 'bg-purple-500/10 text-purple-400 border border-purple-500/20',
            };
            
            return (
              <div class="marquee-item flex-shrink-0">
                <Card hover class="p-6 w-[320px] sm:w-[360px]">
                  <div class={`w-14 h-14 rounded-lg flex items-center justify-center mb-4 ${colorClasses[feature.color]}`} aria-hidden="true">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPaths[feature.icon]} />
                    </svg>
                  </div>
                  <h3 class="text-xl font-bold mb-3 tracking-tight">{feature.title}</h3>
                  <p class="text-gray-400 leading-relaxed text-sm">{feature.description}</p>
                </Card>
              </div>
            );
          })}
        </div>
      </div>
    </div>
    
    <!-- Row 2: Scroll Right to Left (Reverse) -->
    <div class="marquee-row">
      <div class="marquee-container">
        <div class="marquee-track marquee-right">
          {duplicatedFeatures.map((feature, index) => {
            const colorClasses = {
              primary: 'bg-primary-500/10 text-primary-400 border border-primary-500/20',
              blue: 'bg-accent-blue/10 text-accent-blue border border-accent-blue/20',
              orange: 'bg-accent-orange/10 text-accent-orange border border-accent-orange/20',
              emerald: 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20',
              red: 'bg-red-500/10 text-red-400 border border-red-500/20',
              purple: 'bg-purple-500/10 text-purple-400 border border-purple-500/20',
            };
            
            return (
              <div class="marquee-item flex-shrink-0">
                <Card hover class="p-6 w-[320px] sm:w-[360px]">
                  <div class={`w-14 h-14 rounded-lg flex items-center justify-center mb-4 ${colorClasses[feature.color]}`} aria-hidden="true">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={iconPaths[feature.icon]} />
                    </svg>
                  </div>
                  <h3 class="text-xl font-bold mb-3 tracking-tight">{feature.title}</h3>
                  <p class="text-gray-400 leading-relaxed text-sm">{feature.description}</p>
                </Card>
              </div>
            );
          })}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .marquee-row {
    position: relative;
    overflow: hidden;
    width: 100%;
  }
  
  .marquee-container {
    overflow: hidden;
    width: 100%;
    position: relative;
  }
  
  .marquee-track {
    display: flex;
    gap: 1.5rem;
    width: fit-content;
  }
  
  .marquee-left {
    animation: marquee-scroll-left 60s linear infinite;
  }
  
  .marquee-right {
    animation: marquee-scroll-right 60s linear infinite;
  }
  
  .marquee-item {
    flex-shrink: 0;
  }
  
  @keyframes marquee-scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
  
  @keyframes marquee-scroll-right {
    0% {
      transform: translateX(-50%);
    }
    100% {
      transform: translateX(0);
    }
  }
  
  @media (prefers-reduced-motion: reduce) {
    .marquee-left,
    .marquee-right {
      animation: none;
    }
    
    .marquee-track {
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .marquee-container {
      overflow: visible;
    }
  }
  
  /* Pause on hover */
  .marquee-container:hover .marquee-track {
    animation-play-state: paused;
  }
</style>
